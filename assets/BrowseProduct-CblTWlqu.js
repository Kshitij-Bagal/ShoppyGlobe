import{u as v,j as e,L as j,a as g,r as n,b as f}from"./index-DSnHb9Ce.js";import{u as m}from"./useFetchProducts-BlL0pXlW.js";import{P as p}from"./index-ZHB17l09.js";const C=({product:r})=>{const o=v(),l=()=>{o(g(r))};return e.jsxs("div",{className:"product-item",children:[e.jsx("span",{className:"availability",children:r.availabilityStatus}),e.jsxs("div",{className:"product",children:[e.jsx("img",{src:r.thumbnail,alt:r.title}),e.jsx("h3",{children:r.title}),e.jsxs("p",{children:["Price: $",r.price]}),e.jsx(j,{to:`/products/${r._id}`,children:"View Details"}),e.jsx("button",{onClick:l,disabled:r.availabilityStatus==="Out of stock",children:"Add to Cart"})]})]})},y=({searchQuery:r,categoryFilter:o,sortOption:l})=>{const{products:c,loading:d,error:h}=m(),[u,a]=n.useState([]);return n.useEffect(()=>{let s=Array.isArray(c)?[...c]:[];switch(r&&(s=s.filter(t=>t.title.toLowerCase().includes(r.toLowerCase()))),o&&o!=="All"&&(s=s.filter(t=>t.category.toLowerCase()===o.toLowerCase())),l){case"name":s.sort((t,i)=>t.title.localeCompare(i.title));break;case"name-desc":s.sort((t,i)=>i.title.localeCompare(t.title));break;case"price-asc":s.sort((t,i)=>t.price-i.price);break;case"price-desc":s.sort((t,i)=>i.price-t.price);break;case"availability":s.sort((t,i)=>i.stock-t.stock);break;case"deliveryTime":s.sort((t,i)=>t.deliveryTime-i.deliveryTime);break}a(s)},[c,r,o,l]),d?e.jsx("p",{children:"Loading products..."}):h?e.jsx("p",{children:"Error loading products!"}):e.jsx("div",{className:"product-list",children:u.length>0?u.map((s,t)=>e.jsx(C,{product:s},s.id||`${s.title}-${t}`)):e.jsx("p",{children:"No products found."})})},x=({onSearch:r,onCategoryChange:o,onSortChange:l,selectedCategory:c})=>{const{categories:d=[]}=m(),[h,u]=n.useState("");return e.jsxs("div",{className:"filter-bar",children:[e.jsx("input",{className:"searchBar",type:"text",placeholder:"Search products...",value:h,onChange:a=>{u(a.target.value),r(a.target.value)}}),e.jsxs("select",{className:"sortfiler",value:c||"All",onChange:a=>o(a.target.value),children:[e.jsx("option",{value:"All",children:"All Categories"}),d.length>0?d.map(a=>e.jsx("option",{value:a,children:a},a)):e.jsx("option",{value:"All",children:"No Categories Available"})]}),e.jsxs("select",{className:"sortfiler",onChange:a=>l(a.target.value),children:[e.jsx("option",{value:"",children:"Sort By"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),e.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),e.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),e.jsx("option",{value:"availability",children:"Availability"}),e.jsx("option",{value:"deliveryTime",children:"Delivery Time"})]})]})};x.propTypes={onSearch:p.func.isRequired,onCategoryChange:p.func.isRequired,onSortChange:p.func.isRequired};const A=()=>{const[r,o]=n.useState(""),[l,c]=n.useState(""),[d,h]=n.useState(""),[u]=f(),a=u.get("category");return n.useEffect(()=>{a&&c(a)},[a]),e.jsxs("div",{className:"browse-product-page",children:[e.jsx("h1",{children:"Browse Products"}),e.jsx(x,{onSearch:s=>o(s),onCategoryChange:s=>c(s),onSortChange:s=>h(s),selectedCategory:l||"All Categories"}),e.jsx(y,{searchQuery:r,categoryFilter:l,sortOption:d})]})};export{A as default};
