import{n as f,r as o,o as I,e as C,j as e}from"./index-v4Nki3aL.js";const S="/api/users",E=async a=>(await f.post(`${S}/login`,a)).data,U=async a=>(await f.post(`${S}/register`,a)).data,P=()=>{const[a,u]=o.useState(""),[r,g]=o.useState(""),[c,y]=o.useState(""),[p,b]=o.useState(""),[d,L]=o.useState(""),[m,h]=o.useState(!0),{setUser:v,setToken:x}=I(),j=C(),N=async t=>{var i,l;if(t.preventDefault(),a&&r)try{const{user:s,token:n}=await E({email:a,password:r});s&&n?(v(s),x(n),localStorage.setItem("token",n),localStorage.setItem("userId",s._id),j("/profile",{replace:!0})):alert("Login failed: Invalid response from server")}catch(s){alert("Login failed: "+(((l=(i=s.response)==null?void 0:i.data)==null?void 0:l.message)||s.message))}},w=async t=>{var i,l;if(t.preventDefault(),c&&p&&d&&a&&r)try{const{user:s,token:n}=await U({firstName:c,lastName:p,username:d,email:a,password:r});s&&n?(v(s),x(n),localStorage.setItem("token",n),localStorage.setItem("userId",s._id),j("/profile",{replace:!0})):alert("Signup failed: Invalid response from server")}catch(s){alert("Signup failed: "+(((l=(i=s.response)==null?void 0:i.data)==null?void 0:l.message)||s.message))}};return e.jsx("div",{className:"login-signup-container",children:e.jsx("div",{className:"card-container",children:e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:m?"Login":"Sign Up"}),m?e.jsxs("form",{onSubmit:N,children:[e.jsx("input",{type:"email",placeholder:"Enter Email",value:a,onChange:t=>u(t.target.value)}),e.jsx("input",{type:"password",placeholder:"Enter Password",value:r,onChange:t=>g(t.target.value)}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"submit",children:"Login"}),e.jsx("button",{type:"button",onClick:()=>h(!1),children:"Don't have an account? Sign Up"})]})]}):e.jsxs("form",{onSubmit:w,children:[e.jsx("input",{type:"text",placeholder:"First Name",value:c,onChange:t=>y(t.target.value)}),e.jsx("input",{type:"text",placeholder:"Last Name",value:p,onChange:t=>b(t.target.value)}),e.jsx("input",{type:"text",placeholder:"Username",value:d,onChange:t=>L(t.target.value)}),e.jsx("input",{type:"email",placeholder:"Enter Email",value:a,onChange:t=>u(t.target.value)}),e.jsx("input",{type:"password",placeholder:"Enter Password",value:r,onChange:t=>g(t.target.value)}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"submit",children:"Sign Up"}),e.jsx("button",{type:"button",onClick:()=>h(!0),children:"Already have an account? Login"})]})]})]})})})};export{P as default};
