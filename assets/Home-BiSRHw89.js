import{r,j as e,L as u}from"./index-v4Nki3aL.js";import{u as h}from"./useFetchProducts-3cdtu-4G.js";const y=()=>{const{products:a}=h(),{categories:n=[]}=h(),[s,i]=r.useState(null),[m,p]=r.useState(!1),[g,x]=r.useState(!0),[f,j]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const c=await(await fetch("http://localhost:8000/api/products")).json();c.products&&c.products.length>0&&(i(l(c.products)),setCategories(C(c.products)));const d=n;d.categories&&setCategories(d.categories),x(!1)}catch(o){console.error("Failed to fetch products and categories:",o)}})()},[]);const l=t=>{const o=Math.floor(Math.random()*t.length);return t[o]},C=t=>{const o=new Set(t.map(c=>c.category));return Array.from(o)};return r.useEffect(()=>{const t=setInterval(()=>{a.length>0&&i(l(a))},5e3);return()=>clearInterval(t)},[a]),r.useEffect(()=>{const t=setTimeout(()=>{p(!0),j(!1)},5e3);return()=>clearTimeout(t)},[]),e.jsxs("div",{className:"home",children:[e.jsx("div",{className:"category-list-marquee",children:g?e.jsx("p",{children:"Loading categories..."}):e.jsx("div",{className:"category-marquee",children:e.jsx("ul",{children:n.map((t,o)=>e.jsx(u,{to:`/browse?category=${encodeURIComponent(t)}`,children:e.jsx("li",{children:t})},`${t}-${o}`))})})}),"      ",f?e.jsxs("div",{className:"welcome-message",children:[e.jsx("h1",{children:"Welcome to ShoppyGlobe!"}),e.jsx("p",{children:'"Your one-stop shop for all your needs."'})]}):m&&s&&e.jsxs("div",{className:"advertisement",children:[e.jsx("h2",{children:"Featured Product"}),e.jsx("img",{src:s.thumbnail,alt:s.title,className:"ad-image"}),e.jsx("h3",{children:s.title}),e.jsx("p",{children:s.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",s.price,e.jsxs("span",{style:{color:"red"},children:[" (",s.discountPercentage,"% off)"]})]}),e.jsx(u,{to:`/products/${encodeURIComponent(s.title)}`,children:e.jsx("button",{className:"shop-now-btn",children:"Shop Now"})})]})]})};export{y as default};
