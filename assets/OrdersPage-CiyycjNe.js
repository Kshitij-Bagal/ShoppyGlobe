import{r as c,c as m,j as r}from"./index-DSnHb9Ce.js";const x=(o,a="https://shoppyglobe-server.onrender.com/api")=>{const[l,i]=c.useState([]),[d,t]=c.useState(!0),[s,e]=c.useState(null);return c.useEffect(()=>{const h=localStorage.getItem("token");if(!h){e("Authorization token not found"),t(!1);return}const u=new AbortController,j=u.signal;return(async()=>{try{t(!0),e(null);const n=await fetch(`${a}/orders/${o}`,{method:"GET",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},signal:j}),f=await n.json();if(!n.ok)throw new Error(f.message||"Failed to fetch orders");i(f.orders||[])}catch(n){n.name!=="AbortError"&&(console.error("Error fetching orders:",n),e(n.message))}finally{t(!1)}})(),()=>u.abort()},[o,a]),{orders:l,loading:d,error:s}},y=()=>{const{userId:o}=m(),a=localStorage.getItem("userId")||1,l=o||a,{orders:i,loading:d,error:t}=x(l);return d?r.jsx("p",{children:"Loading order history..."}):t?r.jsx("p",{children:t}):i.length===0?r.jsx("p",{children:"No past orders found."}):r.jsxs("div",{className:"orders-page",children:[r.jsx("h2",{children:"Order History"}),i.map(s=>r.jsxs("div",{className:"order-card",children:[r.jsxs("h3",{children:["Order ID: ",s._id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Total Price:"})," $",s.total]}),r.jsx("div",{className:"order-items",children:Array.isArray(s.cart)&&s.cart.length>0?s.cart.map(e=>r.jsxs("div",{className:"order-item",children:[r.jsx("img",{src:e.thumbnail,alt:`${e.title}`}),r.jsxs("div",{children:[r.jsx("p",{children:e.title}),r.jsxs("p",{children:["Quantity: ",e.quantity]}),r.jsxs("p",{children:["Price: $",e.price]})]})]},e._id)):r.jsx("p",{children:"No products in this order."})})]},s._id))]})};export{y as default};
