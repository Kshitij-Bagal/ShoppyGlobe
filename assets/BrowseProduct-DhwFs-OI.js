import{u as f,j as e,L as v,a as y,r as c,b as C}from"./index-iotoG_RL.js";import{P as p}from"./index-CFat853r.js";const S=({product:a})=>{const i=f();return e.jsxs("div",{className:"product-item",children:[e.jsx("span",{className:"availability",children:a.availabilityStatus}),e.jsxs("div",{className:"product",children:[e.jsx("img",{src:a.thumbnail,alt:a.title}),e.jsx("h3",{children:a.title}),e.jsxs("p",{children:["Price: $",a.price]}),e.jsx(v,{to:`/ShoppyGlobe/product/${a.title}`,children:"View Details"}),e.jsx("button",{onClick:()=>i(y(a)),children:"Add to Cart"})]})]})},m=()=>{const[a,i]=c.useState([]),[n,l]=c.useState([]),[u,h]=c.useState(!0),[d,r]=c.useState(null);return c.useEffect(()=>{(async()=>{try{const s=await fetch("https://dummyjson.com/products");if(!s.ok)throw new Error("Failed to fetch products");const o=await s.json();if(o&&Array.isArray(o.products)){i(o.products);const j=[...new Set(o.products.map(g=>g.category))];l(j)}else i([]),l([])}catch(s){r(s.message)}finally{h(!1)}})()},[]),{products:a,categories:n,loading:u,error:d}},P=({searchQuery:a,categoryFilter:i,sortOption:n})=>{const{products:l,loading:u,error:h}=m(),[d,r]=c.useState([]);return c.useEffect(()=>{let t=Array.isArray(l)?[...l]:[];switch(a&&(t=t.filter(s=>s.title.toLowerCase().includes(a.toLowerCase()))),i&&i!=="All"&&(t=t.filter(s=>s.category.toLowerCase()===i.toLowerCase())),n){case"name":t.sort((s,o)=>s.title.localeCompare(o.title));break;case"name-desc":t.sort((s,o)=>o.title.localeCompare(s.title));break;case"price-asc":t.sort((s,o)=>s.price-o.price);break;case"price-desc":t.sort((s,o)=>o.price-s.price);break;case"availability":t.sort((s,o)=>o.stock-s.stock);break;case"deliveryTime":t.sort((s,o)=>s.deliveryTime-o.deliveryTime);break}r(t)},[l,a,i,n]),u?e.jsx("p",{children:"Loading products..."}):h?e.jsx("p",{children:"Error loading products!"}):e.jsx("div",{className:"product-list",children:d.length>0?d.map(t=>e.jsx(S,{product:t},t.id)):e.jsx("p",{children:"No products found."})})},x=({onSearch:a,onCategoryChange:i,onSortChange:n,selectedCategory:l})=>{const{categories:u}=m(),[h,d]=c.useState("");return x.propTypes={onSearch:p.func.isRequired,onCategoryChange:p.func.isRequired,onSortChange:p.func.isRequired},e.jsxs("div",{className:"filter-bar",children:[e.jsx("input",{className:"searchBar",type:"text",placeholder:"Search products...",value:h,onChange:r=>{d(r.target.value),a(r.target.value)}}),e.jsxs("select",{className:"sortfiler",value:l||"All",onChange:r=>i(r.target.value),children:[e.jsx("option",{value:"All",children:"All Categories"}),u.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsxs("select",{className:"sortfiler",onChange:r=>n(r.target.value),children:[e.jsx("option",{value:"",children:"Sort By"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),e.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),e.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),e.jsx("option",{value:"availability",children:"Availability"}),e.jsx("option",{value:"deliveryTime",children:"Delivery Time"})]})]})},A=()=>{const[a,i]=c.useState(""),[n,l]=c.useState(""),[u,h]=c.useState(""),[d]=C(),r=d.get("category");return c.useEffect(()=>{r&&l(r)},[r]),e.jsxs("div",{className:"browse-product-page",children:[e.jsx("h1",{children:"Browse Products"}),e.jsx(x,{onSearch:t=>i(t),onCategoryChange:t=>l(t),onSortChange:t=>h(t),selectedCategory:n||"All Categories"}),e.jsx(P,{searchQuery:a,categoryFilter:n,sortOption:u})]})};export{A as default};
