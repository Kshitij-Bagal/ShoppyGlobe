import{r,j as e,L as u}from"./index-Duvofgoi.js";import{u as h}from"./useFetchProducts-DcQtJbtu.js";const y=()=>{const{products:n}=h(),{categories:a=[]}=h(),[t,i]=r.useState(null),[p,m]=r.useState(!1),[g,x]=r.useState(!0),[f,j]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const c=await(await fetch("https://shoppyglobe-server.onrender.com/api/products")).json();c.products&&c.products.length>0&&(i(l(c.products)),setCategories(C(c.products)));const d=a;d.categories&&setCategories(d.categories),x(!1)}catch(o){console.error("Failed to fetch products and categories:",o)}})()},[]);const l=s=>{const o=Math.floor(Math.random()*s.length);return s[o]},C=s=>{const o=new Set(s.map(c=>c.category));return Array.from(o)};return r.useEffect(()=>{const s=setInterval(()=>{n.length>0&&i(l(n))},5e3);return()=>clearInterval(s)},[n]),r.useEffect(()=>{const s=setTimeout(()=>{m(!0),j(!1)},5e3);return()=>clearTimeout(s)},[]),e.jsxs("div",{className:"home",children:[e.jsx("div",{className:"category-list-marquee",children:g?e.jsx("p",{children:"Loading categories..."}):e.jsx("div",{className:"category-marquee",children:e.jsx("ul",{children:a.map((s,o)=>e.jsx(u,{to:`/browse?category=${encodeURIComponent(s)}`,children:e.jsx("li",{children:s})},`${s}-${o}`))})})}),"      ",f?e.jsxs("div",{className:"welcome-message",children:[e.jsx("h1",{children:"Welcome to ShoppyGlobe!"}),e.jsx("p",{children:'"Your one-stop shop for all your needs."'})]}):p&&t&&e.jsxs("div",{className:"advertisement",children:[e.jsx("h2",{children:"Featured Product"}),e.jsx("img",{src:t.thumbnail,alt:t.title,className:"ad-image"}),e.jsx("h3",{children:t.title}),e.jsx("p",{children:t.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",t.price,e.jsxs("span",{style:{color:"red"},children:[" (",t.discountPercentage,"% off)"]})]}),e.jsx(u,{to:`/products/${encodeURIComponent(t.title)}`,children:e.jsx("button",{className:"shop-now-btn",children:"Shop Now"})})]})]})};export{y as default};
