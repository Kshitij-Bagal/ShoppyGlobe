import{u as v,j as e,L as j,a as g,r as n,b as f}from"./index-v4Nki3aL.js";import{u as m}from"./useFetchProducts-3cdtu-4G.js";import{P as p}from"./index-CNr1fK3f.js";const C=({product:t})=>{const o=v(),l=()=>{console.log("Product to add to cart:",t),o(g(t))};return e.jsxs("div",{className:"product-item",children:[e.jsx("span",{className:"availability",children:t.availabilityStatus}),e.jsxs("div",{className:"product",children:[e.jsx("img",{src:t.thumbnail,alt:t.title}),e.jsx("h3",{children:t.title}),e.jsxs("p",{children:["Price: $",t.price]}),e.jsx(j,{to:`/products/${t._id}`,children:"View Details"}),e.jsx("button",{onClick:l,disabled:t.availabilityStatus==="Out of stock",children:"Add to Cart"})]})]})},y=({searchQuery:t,categoryFilter:o,sortOption:l})=>{const{products:c,loading:d,error:h}=m(),[u,a]=n.useState([]);return console.log(c),n.useEffect(()=>{let s=Array.isArray(c)?[...c]:[];switch(t&&(s=s.filter(r=>r.title.toLowerCase().includes(t.toLowerCase()))),o&&o!=="All"&&(s=s.filter(r=>r.category.toLowerCase()===o.toLowerCase())),l){case"name":s.sort((r,i)=>r.title.localeCompare(i.title));break;case"name-desc":s.sort((r,i)=>i.title.localeCompare(r.title));break;case"price-asc":s.sort((r,i)=>r.price-i.price);break;case"price-desc":s.sort((r,i)=>i.price-r.price);break;case"availability":s.sort((r,i)=>i.stock-r.stock);break;case"deliveryTime":s.sort((r,i)=>r.deliveryTime-i.deliveryTime);break}a(s)},[c,t,o,l]),d?e.jsx("p",{children:"Loading products..."}):h?e.jsx("p",{children:"Error loading products!"}):e.jsx("div",{className:"product-list",children:u.length>0?u.map((s,r)=>e.jsx(C,{product:s},s.id||`${s.title}-${r}`)):e.jsx("p",{children:"No products found."})})},x=({onSearch:t,onCategoryChange:o,onSortChange:l,selectedCategory:c})=>{const{categories:d=[]}=m(),[h,u]=n.useState("");return e.jsxs("div",{className:"filter-bar",children:[e.jsx("input",{className:"searchBar",type:"text",placeholder:"Search products...",value:h,onChange:a=>{u(a.target.value),t(a.target.value)}}),e.jsxs("select",{className:"sortfiler",value:c||"All",onChange:a=>o(a.target.value),children:[e.jsx("option",{value:"All",children:"All Categories"}),d.length>0?d.map(a=>e.jsx("option",{value:a,children:a},a)):e.jsx("option",{value:"All",children:"No Categories Available"})]}),e.jsxs("select",{className:"sortfiler",onChange:a=>l(a.target.value),children:[e.jsx("option",{value:"",children:"Sort By"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),e.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),e.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),e.jsx("option",{value:"availability",children:"Availability"}),e.jsx("option",{value:"deliveryTime",children:"Delivery Time"})]})]})};x.propTypes={onSearch:p.func.isRequired,onCategoryChange:p.func.isRequired,onSortChange:p.func.isRequired};const A=()=>{const[t,o]=n.useState(""),[l,c]=n.useState(""),[d,h]=n.useState(""),[u]=f(),a=u.get("category");return n.useEffect(()=>{a&&c(a)},[a]),e.jsxs("div",{className:"browse-product-page",children:[e.jsx("h1",{children:"Browse Products"}),e.jsx(x,{onSearch:s=>o(s),onCategoryChange:s=>c(s),onSortChange:s=>h(s),selectedCategory:l||"All Categories"}),e.jsx(y,{searchQuery:t,categoryFilter:l,sortOption:d})]})};export{A as default};
